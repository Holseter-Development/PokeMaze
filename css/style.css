
:root{
  --bg:#0b1017; --panel:#101827; --ink:#d7e3ff; --muted:#8fa1c2; --accent:#70a5ff;
  --edge:#152238; --chip:#0e1421;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:radial-gradient(1200px 600px at 70% -20%, #172236 0%, #0b1017 60%); color:var(--ink); font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;}
#app{display:flex; flex-direction:column; height:100%}
.topbar{display:flex; align-items:center; justify-content:space-between; padding:10px 14px; background:linear-gradient(180deg,#0f1626,#0b1017); border-bottom:1px solid var(--edge); position:sticky; top:0; z-index:5}
.brand{font-family:Oxanium, monospace; font-size:20px; letter-spacing:1px}
.meta{display:flex; gap:16px; color:var(--muted)}
.actions .btn{background:var(--chip); border:1px solid var(--edge); color:var(--ink); padding:6px 10px; border-radius:8px; cursor:pointer}
.actions .btn:hover{border-color:var(--accent)}

.layout{display:grid; grid-template-columns: 1fr 360px; gap:14px; padding:14px; height:calc(100vh - 56px)}
.left{display:flex; flex-direction:column; gap:8px; min-width:0}
.view-wrap{position:relative; width:100%}
#view{width:100%; height:auto; border-radius:12px; background:#000; border:1px solid var(--edge); image-rendering:auto}
.overlay{position:absolute; inset:0; display:flex; align-items:center; justify-content:center}
.overlay.hidden{display:none}
.hud{display:flex; gap:8px}
.party{flex:1; display:flex; gap:8px; min-width:0}
.party .poke{background:var(--chip); border:1px solid var(--edge); padding:8px; border-radius:10px; width:33%; display:flex; gap:8px; align-items:center}
.party .bar{height:6px; background:#17233a; border-radius:6px; overflow:hidden; margin-top:4px}
.party .bar > i{display:block; height:100%; background:linear-gradient(90deg, #2ee,#7bf)}
.minimap{width:120px; height:120px; background:#0004; border:1px solid var(--edge); border-radius:6px; overflow:hidden}

.panel{background:linear-gradient(180deg,#101827,#0c141f); border:1px solid var(--edge); border-radius:12px; overflow:hidden; display:flex; flex-direction:column; min-height:200px}
.panel-title{padding:10px 12px; color:#b8c7e6; font-weight:700; border-bottom:1px solid var(--edge); background:#0f1929}
.log{padding:10px; height:calc(50vh - 80px); overflow:auto; font-family:ui-monospace, Menlo, Consolas, monospace; font-size:12px}
.pokedex{padding:10px; display:grid; grid-template-columns:1fr 1fr; gap:8px; max-height:calc(50vh - 80px); overflow:auto}
.dex-entry{display:flex; gap:8px; align-items:center; background:var(--chip); border:1px solid var(--edge); padding:6px; border-radius:8px}
.dex-entry img{width:48px; height:48px; image-rendering:pixelated}

.modal-root{position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:#0009}
.modal{background:#0f1626; border:1px solid var(--edge); border-radius:12px; width:min(640px, 92vw); max-height:80vh; overflow:auto}
.modal header{display:flex; align-items:center; justify-content:space-between; padding:12px; border-bottom:1px solid var(--edge)}
.modal .content{padding:12px}
.hidden{display:none}

.choice-grid{display:grid; grid-template-columns:repeat(3, 1fr); gap:10px}
.choice{background:var(--chip); border:1px solid var(--edge); border-radius:10px; padding:10px; cursor:pointer; display:flex; gap:10px; align-items:center}
.choice:hover{border-color:var(--accent)}
.choice img{width:64px; height:64px; image-rendering:pixelated}

.btn-wide{width:100%; padding:10px; border-radius:10px; border:1px solid var(--edge); background:var(--chip); color:var(--ink); cursor:pointer}
.btn-wide:hover{border-color:var(--accent)}
.small{font-size:12px; color:var(--muted)}
kbd{background:#111a2b; padding:2px 6px; border-radius:6px; border:1px solid #1b2944}
.title{font-family:Oxanium, monospace; font-size:28px; letter-spacing:1px; margin:0 0 8px}
.subtitle{color:var(--muted); margin:0 0 16px}
.home-actions{display:flex; gap:10px; flex-wrap:wrap}
.home-actions .btn-wide{flex:1}

/* Ruby-style battle overlay */
.bui{position:absolute; inset:0; display:grid; grid-template-rows:1fr auto}
.bui .scene{position:relative; overflow:hidden; border-radius:12px}
.bui .bg{position:absolute; inset:0; background:linear-gradient(180deg,#223a5c,#1b2a44 60%, #102036)}
.bui .platform{position:absolute; border-radius:50%; filter:blur(1px); opacity:0.9}
.bui .p-platform{left:6%; bottom:8%; width:46%; height:16%; background:radial-gradient(ellipse at center, #2a3b55, #17263a)}
.bui .e-platform{right:6%; top:10%; width:46%; height:16%; background:radial-gradient(ellipse at center, #2a3b55, #17263a)}
.bui .sprites{position:absolute; inset:0; pointer-events:none}
.bui .sprites img{image-rendering:pixelated; position:absolute}
.bui .bars{position:absolute; inset:0; pointer-events:none}
.bui .bar{position:absolute; background:#0e1526; border:1px solid #1b2a44; padding:6px 8px; border-radius:8px; width:42%}
.bui .hp{height:6px; background:#17233a; border-radius:6px; overflow:hidden; margin-top:4px}
.bui .hp > i{display:block; height:100%; background:linear-gradient(90deg,#4ad66d,#b8e986)}
.bui .e-bar{top:4%; right:4%}
.bui .p-bar{bottom:4%; left:4%}
.bui .menu{background:#0f1626; border:1px solid var(--edge); border-radius:12px; padding:8px; display:grid; grid-template-columns:1fr 1fr; gap:8px; margin-top:8px}
.bui .textbox{grid-column:1/-1; background:#0f1626; border:1px solid var(--edge); border-radius:12px; padding:8px; min-height:44px}
.bui .move{background:var(--chip); border:1px solid var(--edge); border-radius:10px; padding:8px; text-align:left; cursor:pointer}
.bui .move small{display:block; color:var(--muted)}
.bui .bagrun{display:flex; gap:8px}

/* Bigger Ruby-like commands + better contrast */
.menu{display:grid; grid-template-columns:2fr 1fr; gap:10px; margin-top:10px}
.moves{display:grid; grid-template-columns:repeat(2,1fr); gap:8px}
.move{background:linear-gradient(180deg,#1b2a47,#15223a); border:1px solid #27406a; color:#dfe8ff; border-radius:10px; padding:10px; cursor:pointer}
.move small{display:block; color:#9db7e8}
.actions{display:flex; gap:8px}
.btn-big{background:linear-gradient(180deg,#203055,#192744); color:#e7f0ff; border:1px solid #27406a; border-radius:10px; padding:10px 14px; cursor:pointer; font-weight:600}

/* Tighter sprite/shadow alignment */
.bui .p-platform{left:6%; bottom:10%; width:38%; height:14%}
.bui .e-platform{right:8%; top:12%;  width:36%; height:12%}
.bui .p-sprite{left:10%; bottom:13%; width:28%}
.bui .e-sprite{right:12%; top:14%;   width:24%}

/* Swap modal visuals */
.swap-grid{display:grid; grid-template-columns:repeat(3,1fr); gap:8px}
.swap-card{background:#132039; border:1px solid #27406a; border-radius:10px; padding:8px; cursor:pointer}
.swap-card .bar{height:6px; background:#243a62; border-radius:6px; overflow:hidden; margin-top:4px}
.swap-card .bar>i{display:block; height:100%; background:linear-gradient(90deg,#34d399,#a7f3d0)}
